(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{348:function(t,e,o){var content=o(362);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(24).default)("5bb5ed7d",content,!0,{sourceMap:!1})},349:function(t,e,o){var content=o(364);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(24).default)("108f6076",content,!0,{sourceMap:!1})},350:function(t,e,o){var content=o(366);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(24).default)("2447fd38",content,!0,{sourceMap:!1})},352:function(t,e,o){"use strict";o(22);var n,r=o(2),l=(o(132),o(330),o(93),o(345)),c=(o(91),o(92),o(331),{name:"TagSvg",props:{leftText:{type:String,default:""},leftTextWidth:{type:Number,default:0},leftTextColor:{type:String,default:""},leftBgColor:{type:String,default:""},rightText:{type:String,default:""},rightTextWidth:{type:Number,default:0},rightTextColor:{type:String,default:""},rightBgColor:{type:String,default:""},angle:{type:String,default:"square",validator:function(t){return["square","circle","rounded"].includes(t)}},gradient:{type:Boolean,default:!1},textShadow:{type:Boolean,default:!1},iconScale:{type:[Number,String],default:""},iconWidth:{type:Number,default:0},iconPath:{type:String,default:""},iconColor:{type:String,default:""},iconX:{type:[Number,String],default:""},iconY:{type:[Number,String],default:""},sort:{type:Array,default:function(){return[]}}},data:function(){return{padding:7,innerPadding:7}},computed:{getSortName:function(){var t=Object(l.a)(this.sort);return""===this.iconPath&&(t=t.filter((function(t){return"icon"!==t.name}))),t.reduce((function(p,t){return p+t.name[0]}),"").toLowerCase()},iIndex:function(){return this.sort.findIndex((function(t){return"icon"===t.name}))},lIndex:function(){return this.sort.findIndex((function(t){return"left"===t.name}))},rIndex:function(){return this.sort.findIndex((function(t){return"right"===t.name}))},cIndex:function(){return this.sort.findIndex((function(t){return"center"===t.name}))},lIconWidth:function(){return this.iIndex<this.cIndex?this.iconWidth:0},rIconWidth:function(){return this.iIndex>this.cIndex?this.iconWidth:0},lWidth:function(){return this.padding+this.lIconWidth+this.leftTextWidth+this.innerPadding},rWidth:function(){return this.padding+this.rIconWidth+this.rightTextWidth+this.innerPadding},lTextX:function(){var t=this.padding;return this.iIndex<this.lIndex&&(t+=this.lIconWidth),t},rTextX:function(){var t=this.lWidth+this.innerPadding;return this.iIndex>this.cIndex&&this.iIndex<this.rIndex&&(t+=this.rIconWidth),t},lPathD:function(){return"M0 0h".concat(this.lWidth,"v20H0z")},rPathD:function(){return"M".concat(this.lWidth," 0h").concat(this.rWidth,"v20H").concat(this.lWidth,"z")},bgPathD:function(){return"M0 0h".concat(this.lWidth+this.rWidth,"v20H0z")},iconStyle:function(){var t=0;return this.iIndex<this.cIndex?this.iIndex<this.lIndex?t+=+this.iconX+this.padding-5:t+=+this.iconX+this.lTextX+this.leftTextWidth:this.iIndex<this.rIndex?t+=+this.iconX+this.lWidth:t+=+this.iconX+this.rTextX+this.rightTextWidth,{transform:"scale(".concat(this.iconScale,")"),transformOrigin:"".concat(t,"px ").concat(this.iconY,"px 0px")}},iconShadowStyle:function(){var t=this.iconStyle.transformOrigin;return{transform:this.iconStyle.transform,transformOrigin:t.replace(this.iconY+"px",this.iconY+1+"px")}}},watch:{angle:function(t){this.padding="circle"===t?10:7},iconPath:{handler:(n=Object(r.a)(regeneratorRuntime.mark((function t(){var e,o,n,r,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$nextTick();case 2:if(this.$refs.icon){t.next=5;break}return this.$emit("update:iconWidth",0),t.abrupt("return");case 5:e=this.$refs.icon.getBBox(),o=e.height,n=e.width,l=+(n*(r=14/o)+3).toFixed(0),this.$emit("update:iconWidth",l),this.$emit("update:iconScale",r||1);case 10:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)}),immediate:!0}}}),d=o(6),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",height:"20",width:t.lWidth+t.rWidth}},[t.gradient?o("linearGradient",{attrs:{id:"b",x2:"0",y2:"100%"}},[o("stop",{attrs:{offset:"0","stop-color":"#bbb","stop-opacity":".1"}}),o("stop",{attrs:{offset:"1","stop-opacity":".1"}})],1):t._e(),"square"!==t.angle?o("clipPath",{attrs:{id:"a"}},[o("rect",{attrs:{height:"20",fill:"#fff",width:t.lWidth+t.rWidth,rx:"circle"===t.angle?10:3}})]):t._e(),o("g",{attrs:{"clip-path":"square"!==t.angle?"url(#a)":""}},[o("path",{attrs:{fill:t.leftBgColor,d:t.lPathD}}),o("path",{attrs:{fill:t.rightBgColor,d:t.rPathD}}),t.gradient?o("path",{attrs:{fill:"url(#b)",d:t.bgPathD}}):t._e()]),t.textShadow||t.iconPath?o("g",[t.textShadow?o("path",{style:t.iconShadowStyle,attrs:{id:"icon",d:t.iconPath,fill:"#010101","fill-opacity":".3"}}):t._e(),t.iconPath?o("path",{ref:"icon",style:t.iconStyle,attrs:{id:"icon",d:t.iconPath,fill:t.iconColor}}):t._e()]):t._e(),o("g",{attrs:{fill:"#fff","font-family":"Verdana,sans-serif","font-size":"12"}},[t.textShadow?o("text",{attrs:{x:t.lTextX,y:"15",fill:"#010101","fill-opacity":".3"}},[t._v(t._s(t.leftText))]):t._e(),o("text",{attrs:{x:t.lTextX,fill:t.leftTextColor,y:"14"}},[t._v(t._s(t.leftText))]),t.textShadow?o("text",{attrs:{x:t.rTextX,y:"15",fill:"#010101","fill-opacity":".3"}},[t._v(t._s(t.rightText))]):t._e(),o("text",{attrs:{x:t.rTextX,fill:t.rightTextColor,y:"14"}},[t._v(t._s(t.rightText))])])],1)}),[],!1,null,null,null);e.a=component.exports},361:function(t,e,o){"use strict";var n=o(348);o.n(n).a},362:function(t,e,o){(e=o(23)(!1)).push([t.i,'.options__color[data-v-ff36d782]{-webkit-box-flex:1;flex:1;-webkit-box-pack:start;justify-content:flex-start}.options__color[data-v-ff36d782],.options__color[data-v-ff36d782] .el-form-item__content{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.options__color[data-v-ff36d782] .el-form-item__content{margin-left:0!important}.options__color[data-v-ff36d782] .el-color-picker{height:auto;margin-right:auto;height:24px}.options__color[data-v-ff36d782] .el-color-picker__trigger{padding:0;width:24px;height:24px}.options__color ul[data-v-ff36d782]{border:1px dashed rgba(0,0,0,.25);border-radius:3px;height:20px;padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;list-style:none}.options__color ul li[data-v-ff36d782]{width:20px;height:20px;cursor:pointer}.options__color ul li.active[data-v-ff36d782]{box-shadow:inset 0 0 5px rgba(0,0,0,.3);position:relative}.options__color ul li.active[data-v-ff36d782]:after{content:" ";height:100%;width:100%;top:-3px;left:-3px;position:absolute;border:3px solid #fff;box-shadow:0 0 5px rgba(0,0,0,.4);border-radius:3px}',""]),t.exports=e},363:function(t,e,o){"use strict";var n=o(349);o.n(n).a},364:function(t,e,o){(e=o(23)(!1)).push([t.i,".icon-market[data-v-2c6b1f90] .el-dialog{min-width:500px}.icon-market[data-v-2c6b1f90] .el-dialog__body{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center}.icon-market[data-v-2c6b1f90] .el-dialog__body .el-input{width:250px}.icon-empty[data-v-2c6b1f90]{font-size:100px;color:#ededed;margin-top:50px}.icon-market__list[data-v-2c6b1f90]{width:100%;margin:20px 0;display:grid;grid-template-columns:repeat(5,1fr)}.list__item[data-v-2c6b1f90]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;padding:10px;position:relative}.list__item:hover .item__info span[data-v-2c6b1f90]:first-child{margin-left:-100%}.list__item .item__icon[data-v-2c6b1f90]{width:50px;height:50px;font-size:36px;text-align:center}.list__item .item__icon svg[data-v-2c6b1f90]{width:100%}.list__item .item__icon[data-v-2c6b1f90] path{fill:var(--text-color)}.list__item .item__info[data-v-2c6b1f90]{display:-webkit-box;display:flex;overflow:hidden}.list__item .item__info span[data-v-2c6b1f90]{text-align:center;width:100%;flex-shrink:0;margin-left:0;-webkit-transition:all .3s;transition:all .3s}.list__item .item__info span[data-v-2c6b1f90]:last-child{color:#c43030;cursor:pointer;font-weight:700}.list__item .item__info span.disable[data-v-2c6b1f90]{color:rgba(0,0,0,.1);cursor:not-allowed}.list__item.item__disable[data-v-2c6b1f90]{-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;cursor:not-allowed;color:#ccc}",""]),t.exports=e},365:function(t,e,o){"use strict";var n=o(350);o.n(n).a},366:function(t,e,o){(e=o(23)(!1)).push([t.i,"main{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:center;align-items:center;padding-bottom:20px;box-sizing:border-box;background:var(--background-color);padding-top:100px}main>section{width:680px;background:var(--background-color-mid);padding:15px 0;border-radius:10px;margin-bottom:20px;box-shadow:0 0 2px rgba(0,0,0,.1)}main .el-form-item{-webkit-box-flex:1;flex:1;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}main .el-form-item__content{margin-left:0!important}main .el-input-number--small{width:215px}main .el-form-item__label{flex-shrink:0;color:var(--text-color)}main .el-input__inner{background:var(--background-color-light);border-color:var(--border-color)}.home__preview{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;padding-bottom:20px;box-sizing:border-box}.home__preview label{margin-bottom:15px;font-size:20px}.preview__mock{font-family:Verdana,sans-serif;font-size:12px;height:0;overflow:hidden}.preview__tag{display:-webkit-box;display:flex;overflow:hidden;background:red;font-family:DejaVu Sans,Verdana,Geneva,sans-serif}.preview__tag div{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:12px;color:#fff;padding:3px 7px}.preview__tag .tag__left{margin-right:-1px}.home__options{box-sizing:border-box}.home__options .el-select{width:100%}.home__options .el-form-item{padding:10px 20px}.sort-group{padding:10px 20px}.sort-group,.sort-group__item{display:-webkit-box;display:flex}.sort-group__item{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;background:var(--background-color);padding:5px;border-radius:5px;border:1px solid transparent;-webkit-transition:all .3s;transition:all .3s}.sort-group__item:not(.center){-webkit-box-flex:1;flex:1}.sort-group__item:not(:last-child){margin-right:5px}.sort-group__item>span{margin-bottom:10px;line-height:24px;text-align:center}.sort-group__item.icon{-webkit-transition:all .2s;transition:all .2s}.sort-group__item.icon span{cursor:move}.sort-group__item.icon:hover{box-shadow:0 0 3px rgba(0,0,0,.15)}.sort-group__item.sortable-ghost{border:1px solid #c43030}.sort-group__item input{text-align:center;background:var(--background-color-mid)!important}.options__row .el-switch{height:40px}.options__row>.el-form-item{padding:0!important;-webkit-box-align:center;align-items:center}.options__row{padding:10px 20px;display:-webkit-box;display:flex}.options__row>span{-webkit-box-flex:1;flex:1;text-align:center;font-size:14px}.options__row .el-select input{border-top-right-radius:0;border-bottom-right-radius:0}.options__row>.el-input:nth-child(2)>input{border-radius:0}.options__row>.el-input:last-child>input{border-top-left-radius:0;border-bottom-left-radius:0}.options__color,.options__switch{-webkit-box-flex:1;flex:1}.options__switch{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;padding:10px}.options__switch label{font-size:14px;margin-right:10px}.options__switch>div{margin-right:15px}.options__button{text-align:center;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;padding:10px 20px}.options__button button{min-width:100px}.options__button .el-icon-info{color:var(--text-color);margin-right:-30px;cursor:help;opacity:.6}",""]),t.exports=e},368:function(t,e,o){"use strict";o.r(e);o(48),o(25),o(19),o(37),o(132),o(11),o(93);var n,r=o(345),l=(o(22),o(2)),c=(o(353),o(14)),d=o(17),h=o(359),f=o.n(h),m=o(128),x=o(352),_=o(179),v={props:{link:{type:String,default:""}},computed:{markdownLink:function(){return this.link?"![image](".concat(this.link,")"):""}}},k=o(6),w=Object(k.a)(v,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"options__row"},[o("el-form-item",{attrs:{label:t.$t("base.markdown"),size:"small"}},[o("el-input",{attrs:{readonly:""},model:{value:t.markdownLink,callback:function(e){t.markdownLink=e},expression:"markdownLink"}},[o("template",{slot:"append"},[o("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.markdownLink,expression:"markdownLink"}],on:{success:function(e){t.$message.success(t.$t("copySuccess"))}}},[t._v(t._s(t.$t("base.copy")))])],1)],2)],1),o("el-form-item",{attrs:{label:t.$t("base.link"),size:"small"}},[o("el-input",{attrs:{readonly:""},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}},[o("template",{slot:"append"},[o("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.link,expression:"link"}],on:{success:function(e){t.$message.success(t.$t("copySuccess"))}}},[t._v(t._s(t.$t("base.copy")))])],1)],2)],1)],1)}),[],!1,null,null,null).exports,y={name:"ColorPick",props:{value:{type:String,default:""},label:{type:String,default:""},colors:{type:Array,default:function(){return[]}}},data:function(){return{defaultColors:["#9F9F9F","#666666","#FE7D37","#97CA00"]}}},$=(o(361),Object(k.a)(y,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"options__color"},[o("ul",t._l(t.colors,(function(e){return o("li",{class:{active:t.value===e},style:{background:e},on:{click:function(o){return t.$emit("input",e)}}})})),0),o("span",[t._v("•••")]),o("el-color-picker",{attrs:{value:t.value,predefine:t.defaultColors,size:"mini"},on:{change:function(e){return t.$emit("input",e)}}})],1)}),[],!1,null,"ff36d782",null).exports),C={components:{ColorPick:$},props:{textTitle:{type:String,default:""},backgroundTitle:{type:String,default:""},text:{type:String,default:""},textDefault:{type:String,default:"#FFFFFF"},background:{type:String,default:""},backgroundDefault:{type:String,default:"#555555"}},data:function(){return{textColor:this.text,bgColor:this.background}},watch:{textColor:function(t){t||(this.textColor=t=this.textDefault),this.$emit("update:text",t)},bgColor:function(t){t||(this.bgColor=t=this.backgroundDefault),this.$emit("update:background",t)},text:function(){this.textColor=this.text},background:function(){this.bgColor=this.background}}},T=Object(k.a)(C,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"options__row"},[o("el-form-item",{staticClass:"options__color",attrs:{label:t.textTitle}},[o("color-pick",{attrs:{colors:["#FFFFFF","#444"]},model:{value:t.textColor,callback:function(e){t.textColor=e},expression:"textColor"}})],1),o("el-form-item",{staticClass:"options__color",attrs:{label:t.backgroundTitle}},[o("color-pick",{attrs:{colors:["#555555"].concat(t.colors)},model:{value:t.bgColor,callback:function(e){t.bgColor=e},expression:"bgColor"}})],1)],1)}),[],!1,null,null,null).exports,S=(o(91),o(92),{props:{value:{type:Boolean,default:!1}},data:function(){return{searchStr:"",pageNum:1,pageSize:20,total:0,icons:[]}},watch:{pageNum:"fetchIcon",value:function(t){t&&this.$refs.searchInput&&this.$refs.searchInput.focus()}},mounted:function(){this.fetchIcon()},methods:{itemInvalid:function(t){return t.svg.includes("|")||!t.svg},fetchIcon:(n=Object(l.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.searchStr){t.next=2;break}return t.abrupt("return");case 2:return this.$nuxt.$loading.start(),t.next=5,Object(m.a)({url:"/npmer/api/icon/iconfont",params:{search:this.searchStr,pageNum:this.pageNum,pageSize:this.pageSize,collection:this.collection?1:-1}});case 5:e=t.sent,this.icons=e.icons,this.total=e.count,this.$nuxt.$loading.finish();case 9:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})}}),I=(o(363),Object(k.a)(S,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{staticClass:"icon-market",attrs:{title:t.$t("selectIcon"),visible:t.value,"lock-scroll":!0,width:"60%"},on:{close:function(e){return t.$emit("input",!1)}}},[o("el-input",{ref:"searchInput",attrs:{clearable:"",placeholder:t.$t("base.search")},nativeOn:{keypress:function(e){if(!e.type.indexOf("key")&&13!==e.keyCode)return null;t.pageNum=1,t.fetchIcon()}},model:{value:t.searchStr,callback:function(e){t.searchStr=e},expression:"searchStr"}}),t.icons.length?t._e():o("i",{staticClass:"iconfont icon-empty"}),o("ul",{staticClass:"icon-market__list"},t._l(t.icons,(function(e){return t.itemInvalid(e)?o("li",{staticClass:"list__item item__disable"},[t._v(t._s(t.$t("base.invalid")))]):o("li",{staticClass:"list__item"},[o("div",{staticClass:"item__icon",domProps:{innerHTML:t._s(e.file)}}),o("div",{staticClass:"item__info"},[o("span",[t._v(t._s(e.name))]),o("span",{on:{click:function(o){return t.$emit("change",e.svg)}}},[t._v(t._s(t.$t("base.select")))])])])})),0),o("el-pagination",{attrs:{background:"","hide-on-single-page":!0,layout:"prev, pager, next","page-size":t.pageSize,total:t.total,"current-page":t.pageNum},on:{"current-change":function(e){t.pageNum=e}}})],1)}),[],!1,null,"2c6b1f90",null).exports);function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var W,j,F,z,N={angle:"square",textShadow:!1,gradient:!1,leftText:"welcome",leftTextWidth:0,leftTextColor:"#FFFFFF",leftBgColor:"#555555",rightText:"programmer",rightTextWidth:0,rightTextColor:"#FFFFFF",rightBgColor:"#C43030",iconColor:"#FFFFFF",iconPosition:"left",iconPath:"",iconScale:0,iconWidth:0,iconY:3,iconX:5},L={head:function(){return{title:this.$t("base.home")+" | NPMer"}},components:{TagSvg:x.a,NpmerFoot:_.a,LinkCopy:w,PickColor:T,ColorPick:$,Draggable:f.a,IconMarket:I},data:function(){return{editTemplateId:!1,iconMarketVisible:!1,icons:[],iconIndex:"",options:{},link:"",markdownLink:"",customPath:"",customScale:.13,sort:[{name:"icon",title:"base.icon"},{name:"left",title:"leftText"},{name:"center",title:"base.center"},{name:"right",title:"rightText"}]}},computed:O({},Object(d.c)(["account"]),{nameKey:function(){return"zh"===this.$i18n.locale?"nameZH":"nameEN"}}),watch:{iconIndex:function(t){if(0===t)this.$set(this.options,"iconPath","");else{var content=(this.icons[t]||{}).content;this.$set(this.options,"iconPath",content)}},"options.leftText":function(){var t=this,e=this.$refs.leftText;this.$nextTick((function(){t.$set(t.options,"leftTextWidth",e.offsetWidth)}))},"options.rightText":function(){var t=this,e=this.$refs.rightText;this.$nextTick((function(){t.$set(t.options,"rightTextWidth",e.offsetWidth)}))},options:{handler:function(){this.link=""},deep:!0}},mounted:function(){this.fetchIcons(),this.enterEdit(),this.options=O({},N)},activated:function(){this.enterEdit()},methods:{fetchIcons:(z=Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=[{nameEN:"Customize",nameZH:"自定义"}],t.t1=r.a,t.next=4,Object(m.a)("/npmer/api/icon");case 4:t.t2=t.sent,t.t3=(0,t.t1)(t.t2),this.icons=t.t0.concat.call(t.t0,t.t3);case 7:case"end":return t.stop()}}),t,this)}))),function(){return z.apply(this,arguments)}),iconPositionReset:function(){this.options.iconX=5,this.options.iconY=3},checkMove:function(t){return"icon"===t.draggedContext.element.name},checkExist:function(t){return new Promise((function(e,o){var img=document.createElement("img");img.onload=function(){return e(!0)},img.onerror=function(){return e(!1)},img.src=t}))},downloadImg:function(){var t=this.$refs.content.$el.outerHTML.replace(/<!---->/g,""),link=document.createElement("a");link.download="npm-logo.svg",link.href="data:image/svg+xmlcharset=utf-8,".concat(encodeURIComponent(t)),link.click()},getSortName:function(){var t=Object(r.a)(this.sort);return""===this.iconIndex&&(t=t.filter((function(t){return"icon"!==t.name}))),t.reduce((function(p,t){return p+t.name[0]}),"").toLowerCase()},getIconName:function(){var t="";switch(this.iconIndex){case"":t="none";break;case 0:t=this.iconPath?"custom".concat(Date.now()):"none";break;default:t=""+this.icons[this.iconIndex].id}return t.toLowerCase()},createLink:(F=Object(l.a)(regeneratorRuntime.mark((function t(){var e,o,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.getIconName(),o=[this.getSortName(),e,"none"===e?"none":this.options.iconColor.toLowerCase(),this.options.leftText,this.options.leftTextColor.toLowerCase(),this.options.leftBgColor.toLowerCase(),this.options.rightText,this.options.rightTextColor.toLowerCase(),this.options.rightBgColor.toLowerCase(),this.options.angle[0].toLowerCase(),this.options.gradient?"t":"f",this.options.textShadow?"t":"f"].join("-").replace(/#/g,"")+".svg",n="https://woolson.github.io/npmer-badge/badge/"+o,t.next=6,this.checkExist(n);case 6:if(!t.sent){t.next=11;break}this.link=n,t.next=15;break;case 11:return t.next=13,Object(m.a)({responseType:"json",url:"/npmer/api/badge",method:"POST",headers:{"Content-Type":"application/json"},data:{name:encodeURI(o),content:this.$refs.content.$el.outerHTML}});case 13:r=t.sent,this.link=r;case 15:this.$message.success(this.$t("createLink")+this.$t("base.success")),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),console.log(t.t0),this.$message.error(this.$t(t.t0.message));case 22:case"end":return t.stop()}}),t,this,[[0,18]])}))),function(){return F.apply(this,arguments)}),createTemplate:(j=Object(l.a)(regeneratorRuntime.mark((function t(){var e,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.account){t.next=4;break}return this.$alert(this.$t("message.shouldLogin"),this.$t("base.tip"),{confirmButtonText:this.$t("base.login")}).then((function(){location.href="https://github.com/login/oauth/authorize?client_id=c03fba868563cbf34940&redirect_uri=https://woolson.cn/npmer/api/github/callback&state=123123sadh1as12"})),t.abrupt("return");case 4:return e=O({},this.options,{sort:this.sort}),t.next=7,Object(m.a)({method:"POST",url:"/npmer/api/template",data:{config:JSON.stringify(e)}});case 7:o=t.sent,this.$router.push({path:"/template/my?page=1",query:{id:o}}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),this.$message.error(this.$t(t.t0.message));case 14:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(){return j.apply(this,arguments)}),enterEdit:function(){var t=this,e=localStorage.getItem("template-edit");if(e){var o=JSON.parse(e),n=JSON.parse(o.config);this.editTemplateId=o.id,this.sort=n.sort,Object.keys(this.options).forEach((function(e){t.$set(t.options,e,n[e])})),localStorage.removeItem("template-edit")}else this.editTemplateId=""},updateTemplate:(W=Object(l.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=O({},this.options,{sort:this.sort}),t.next=4,Object(m.a)({method:"PUT",url:"/npmer/api/template/".concat(this.editTemplateId),data:{config:JSON.stringify(e)}});case 4:this.$router.push("/template/my?page=1"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.$message.error(this.$t(t.t0.message));case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return W.apply(this,arguments)})}},B=(o(365),Object(k.a)(L,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("main",{staticClass:"home"},[o("section",{staticClass:"home__preview"},[o("label",[t._v(t._s(t.$t("base.preview")))]),o("tag-svg",t._b({ref:"content",attrs:{sort:t.sort,iconScale:t.options.iconScale,iconWidth:t.options.iconWidth},on:{"update:iconScale":function(e){return t.$set(t.options,"iconScale",e)},"update:icon-scale":function(e){return t.$set(t.options,"iconScale",e)},"update:iconWidth":function(e){return t.$set(t.options,"iconWidth",e)},"update:icon-width":function(e){return t.$set(t.options,"iconWidth",e)}}},"tag-svg",t.options,!1)),o("div",{staticClass:"preview__mock"},[o("span",{ref:"leftText"},[t._v(t._s(t.options.leftText))]),o("span",{ref:"rightText"},[t._v(t._s(t.options.rightText))])])],1),o("section",{staticClass:"home__options"},[o("el-form",{ref:"options",attrs:{model:t.options,"label-width":"100px"}},[o("draggable",{staticClass:"sort-group",attrs:{move:t.checkMove},model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}},t._l(t.sort,(function(e,n){return o("div",{key:e.name,staticClass:"sort-group__item",class:e.name},[o("span",{class:{"el-icon-rank":"icon"===e.name}},[t._v(t._s(t.$t(e.title)))]),"icon"===e.name?o("el-select",{attrs:{placeholder:t.$t("base.select"),clearable:"",filterable:""},model:{value:t.iconIndex,callback:function(e){t.iconIndex=e},expression:"iconIndex"}},t._l(t.icons,(function(e,n){return o("el-option",{key:e.id,attrs:{label:e[t.nameKey],value:n}})})),1):"left"===e.name?o("el-input",{attrs:{clearable:""},model:{value:t.options.leftText,callback:function(e){t.$set(t.options,"leftText",e)},expression:"options.leftText"}}):"right"===e.name?o("el-input",{attrs:{clearable:""},model:{value:t.options.rightText,callback:function(e){t.$set(t.options,"rightText",e)},expression:"options.rightText"}}):t._e()],1)})),0),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===t.iconIndex,expression:"iconIndex === 0"}],staticClass:"u-flex",attrs:{label:t.$t("iconPath")}},[o("el-input",{attrs:{disabled:"",size:"small",clearable:""},model:{value:t.options.iconPath,callback:function(e){t.$set(t.options,"iconPath",e)},expression:"options.iconPath"}},[o("el-button",{attrs:{slot:"append"},on:{click:function(e){t.iconMarketVisible=!0}},slot:"append"},[t._v(t._s(t.$t("base.select")))])],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.options.iconPath,expression:"options.iconPath"}],staticClass:"options__row"},[o("el-form-item",{attrs:{label:t.$t("iconXOffset")}},[o("el-input-number",{attrs:{size:"small",step:.5},model:{value:t.options.iconX,callback:function(e){t.$set(t.options,"iconX",e)},expression:"options.iconX"}})],1),o("el-form-item",{attrs:{label:t.$t("iconYOffset")}},[o("el-input-number",{attrs:{size:"small",step:.5},model:{value:t.options.iconY,callback:function(e){t.$set(t.options,"iconY",e)},expression:"options.iconY"}})],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:t.options.iconPath,expression:"options.iconPath"}],staticClass:"options__row"},[o("el-form-item",{attrs:{label:t.$t("iconColor")}},[o("color-pick",{attrs:{colors:["#FFFFFF"].concat(t.colors)},model:{value:t.options.iconColor,callback:function(e){t.$set(t.options,"iconColor",e)},expression:"options.iconColor"}})],1),o("el-form-item",{attrs:{label:t.$t("iconPosition")}},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.iconPositionReset}},[t._v(t._s(t.$t("base.reset")))])],1)],1),o("div",{staticClass:"options__row"},[o("el-form-item",{attrs:{label:t.$t("textShadow")}},[o("el-switch",{model:{value:t.options.textShadow,callback:function(e){t.$set(t.options,"textShadow",e)},expression:"options.textShadow"}})],1)],1),o("div",{staticClass:"options__row"},[o("el-form-item",{attrs:{label:t.$t("bgGradient")}},[o("el-switch",{model:{value:t.options.gradient,callback:function(e){t.$set(t.options,"gradient",e)},expression:"options.gradient"}})],1),o("el-form-item",{staticClass:"u-flex",attrs:{label:t.$t("bgAngle")}},[o("el-radio-group",{attrs:{size:"mini"},model:{value:t.options.angle,callback:function(e){t.$set(t.options,"angle",e)},expression:"options.angle"}},[o("el-radio-button",{attrs:{label:"square"}},[o("i",{staticClass:"iconfont icon-square"})]),o("el-radio-button",{attrs:{label:"rounded"}},[o("i",{staticClass:"iconfont icon-rounded"})]),o("el-radio-button",{attrs:{label:"circle"}},[o("i",{staticClass:"iconfont icon-circle"})])],1)],1)],1),o("pick-color",{attrs:{textTitle:t.$t("leftTextColor"),backgroundTitle:t.$t("leftBgColor"),text:t.options.leftTextColor,background:t.options.leftBgColor,backgroundDefault:"#555555"},on:{"update:text":function(e){return t.$set(t.options,"leftTextColor",e)},"update:background":function(e){return t.$set(t.options,"leftBgColor",e)}}}),o("pick-color",{attrs:{textTitle:t.$t("rightTextColor"),backgroundTitle:t.$t("rightBgColor"),text:t.options.rightTextColor,background:t.options.rightBgColor,backgroundDefault:"#C43030"},on:{"update:text":function(e){return t.$set(t.options,"rightTextColor",e)},"update:background":function(e){return t.$set(t.options,"rightBgColor",e)}}}),o("link-copy",{attrs:{link:t.link}}),t.editTemplateId?o("div",{staticClass:"options__button"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){}}},[t._v(t._s(t.$t("base.cancel")))]),o("el-button",{attrs:{type:"primary"},on:{click:t.updateTemplate}},[t._v(t._s(t.$t("updateTemplate")))])],1):o("div",{staticClass:"options__button"},[o("el-button",{attrs:{type:"primary"},on:{click:t.downloadImg}},[t._v("↓ "+t._s(t.$t("base.download")))]),o("el-button",{attrs:{type:"primary"},on:{click:t.createLink}},[t._v("+ "+t._s(t.$t("base.link")))]),o("el-button",{attrs:{type:"primary"},on:{click:t.createTemplate}},[t._v("+ "+t._s(t.$t("base.template")))]),o("el-popover",{attrs:{placement:"top",title:t.$t("base.tip"),width:"200",trigger:"hover",content:t.$t("message.useTemplate")}},[o("i",{staticClass:"el-icon-info",attrs:{slot:"reference"},slot:"reference"})])],1),o("el-alert",{attrs:{title:t.$t("base.warn"),type:"warning",description:t.$t("message.accessLater"),closable:!1,"show-icon":""}})],1)],1),o("icon-market",{on:{change:function(e){t.options.iconPath=e,t.iconMarketVisible=!1}},model:{value:t.iconMarketVisible,callback:function(e){t.iconMarketVisible=e},expression:"iconMarketVisible"}})],1)}),[],!1,null,null,null));e.default=B.exports}}]);